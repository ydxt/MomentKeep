# 拾光记 (Moment Keep) 项目说明文档

## 项目概述

拾光记是一款功能丰富的多平台习惯追踪和个人管理应用，帮助用户养成良好习惯，提高工作效率，记录生活点滴。项目基于 Flutter 框架开发，支持 Windows、macOS、Linux、Android、iOS 和 Web 多平台运行。

### 项目信息
- **项目名称**：Moment Keep (拾光记)
- **版本**：1.0.0
- **框架**：Flutter 3.0+
- **开发语言**：Dart
- **许可协议**：MIT

## 项目规划

### 1. 核心功能模块

#### 1.1 待办事项管理
- 创建、编辑、删除待办事项
- 标记完成状态
- 设置优先级（高/中/低）
- 日期筛选和分类

#### 1.2 习惯打卡与追踪
- 创建习惯
- 设置打卡频率（每日/每周）
- 提醒功能
- 打卡历史记录
- 打卡统计和 streak 追踪

#### 1.3 富文本日记
- 富文本编辑（支持 Markdown）
- 图片附件
- 音频附件
- 标签管理
- 分类管理

#### 1.4 番茄钟专注计时
- 可自定义专注时间
- 休息时间设置
- 专注记录统计
- 专注备注

#### 1.5 数据统计与分析
- 习惯打卡统计
- 待办事项完成率
- 专注时间分析
- 可视化图表展示

#### 1.6 积分兑换系统
- 积分获取机制
- 奖励商城
- 积分兑换记录

#### 1.7 回收站功能
- 已删除项目恢复
- 自动清理机制
- 手动清空回收站

#### 1.8 个人中心
- 用户信息管理
- 应用设置（主题、通知等）
- 数据备份和恢复
- 密码修改

#### 1.9 管理员功能
- 管理员注册（通过隐藏入口）
- 用户管理
- 系统设置
- 数据管理
- 日志查看

### 2. 技术架构

#### 2.1 架构分层
```
表现层 (Presentation)
  ├─ 页面 (Pages)
  ├─ 组件 (Components)
  └─ 状态管理 (BLoC)

领域层 (Domain)
  └─ 业务实体 (Entities)

核心层 (Core)
  ├─ 服务 (Services)
  ├─ 工具类 (Utils)
  ├─ 配置 (Config)
  └─ 主题 (Theme)

数据持久层 (Data Persistence)
  ├─ SQLite 数据库
  ├─ SharedPreferences
  └─ Web 模拟数据库
```

#### 2.2 核心技术栈
- **框架**：Flutter 3.0+
- **状态管理**：BLoC (flutter_bloc) + Provider
- **数据库**：SQLite (sqflite)
- **富文本**：Flutter Quill
- **图表**：FL Chart
- **通知**：flutter_local_notifications
- **权限**：permission_handler
- **地理定位**：geolocator
- **图片处理**：flutter_image_compress, image_cropper
- **动画**：flutter_animate, lottie

## 实施方案

### 阶段一：项目初始化 (已完成)
- [x] Flutter 项目搭建
- [x] 依赖库配置
- [x] 基础架构搭建
- [x] 数据库设计
- [x] 主题系统

### 阶段二：核心功能开发 (进行中)

#### 2.1 数据持久化层
- [x] 数据库服务封装
- [x] 实体模型定义
- [x] 数据库初始化
- [ ] 数据迁移机制

#### 2.2 状态管理
- [x] BLoC 基础框架
- [x] 各功能模块 BLoC
- [ ] 状态持久化

#### 2.3 用户认证
- [x] 用户注册/登录
- [x] 密码加密
- [x] 生物识别
- [x] 管理员注册

#### 2.4 待办事项模块
- [x] 待办事项 CRUD
- [x] 优先级设置
- [x] 完成状态切换
- [ ] 日期筛选优化

#### 2.5 习惯打卡模块
- [x] 习惯 CRUD
- [x] 打卡功能
- [x] 提醒功能
- [x] 打卡统计
- [ ] Streak 追踪优化

#### 2.6 日记模块
- [x] 富文本编辑器
- [x] 图片上传
- [x] 音频录制
- [ ] 标签系统
- [ ] 分类管理

#### 2.7 番茄钟模块
- [x] 计时功能
- [x] 专注记录
- [x] 音频提醒
- [ ] 专注统计优化

#### 2.8 数据统计模块
- [x] 统计数据计算
- [x] 图表展示
- [ ] 数据导出

#### 2.9 积分兑换模块
- [x] 积分系统
- [x] 奖励商城
- [x] 兑换功能
- [ ] 兑换记录

#### 2.10 回收站模块
- [x] 软删除功能
- [x] 恢复功能
- [x] 自动清理

#### 2.11 个人中心模块
- [x] 用户信息管理
- [x] 应用设置
- [ ] 数据备份
- [ ] 数据恢复

### 阶段三：高级功能开发 (计划中)
- [ ] 云同步功能
- [ ] 数据导出（JSON/CSV）
- [ ] OCR 文字识别
- [ ] 地理围栏
- [ ] 社交分享
- [ ] 多语言支持

### 阶段四：优化与发布 (计划中)
- [ ] 性能优化
- [ ] UI/UX 优化
- [ ] 单元测试
- [ ] 集成测试
- [ ] 打包发布
- [ ] 文档完善

## 进度记录

### 2026-02-02
- 创建项目说明文档
- 整理现有文档结构
- 规划项目实施路线

### 项目启动
- 完成项目架构设计
- 完成数据库设计
- 完成核心功能开发

## 质量保证

### 代码规范
- 遵循 Flutter 官方代码风格
- 使用 dart format 格式化代码
- 使用 flutter analyze 检查代码质量
- 为所有函数添加函数级注释

### 测试策略
- 单元测试：核心业务逻辑
- Widget 测试：UI 组件
- 集成测试：完整功能流程
- 平台测试：多平台兼容性

### 性能要求
- 启动时间 < 3s
- 页面切换流畅度 60fps
- 数据库查询 < 100ms
- 内存占用 < 200MB

## 风险与应对

### 技术风险
1. **跨平台兼容性**
   - 风险：不同平台行为差异
   - 应对：充分测试，条件编译，平台适配

2. **性能问题**
   - 风险：大数据量时性能下降
   - 应对：数据库优化，分页加载，缓存机制

3. **第三方依赖**
   - 风险：依赖库不稳定
   - 应对：选择成熟稳定的库，关注更新

### 项目风险
1. **功能范围扩大**
   - 风险：需求不断变化
   - 应对：严格按计划执行，变更需评估

2. **进度延期**
   - 风险：开发时间超出预期
   - 应对：合理评估，优先核心功能

3. **资源不足**
   - 风险：开发资源有限
   - 应对：分阶段实施，优先重要功能

## 联系方式

- **项目仓库**：https://github.com/ydxt/momentkeep
- **问题反馈**：https://github.com/ydxt/momentkeep/issues
- **邮箱**：support@momentkeep.com

---

**最后更新**：2026-02-02
**文档版本**：1.0.0
